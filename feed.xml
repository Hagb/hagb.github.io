<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh_CN"><generator uri="https://jekyllrb.com/" version="3.10.0">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" hreflang="zh_CN" /><updated>2025-10-19T20:59:16-800:00</updated><id>/feed.xml</id><title type="html">Hagb 的小站</title><subtitle></subtitle><author><name>Hagb (郭俊余)</name></author><entry><title type="html">AOSC 中大校园行上 Lean4 分享的幻灯片和代码</title><link href="/lean4-aosc" rel="alternate" type="text/html" title="AOSC 中大校园行上 Lean4 分享的幻灯片和代码" /><published>2025-08-15T00:00:00-800:00</published><updated>2025-08-15T00:00:00-800:00</updated><id>/lean4-aosc</id><content type="html" xml:base="/lean4-aosc"><![CDATA[<p><a href="/lean4-aosc.pdf">幻灯片</a></p>

<p><a href="https://live.lean-lang.org/#codez=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">代码（点击跳转至 Lean 4 Web，可在线运行）</a></p>]]></content><author><name>Hagb (郭俊余)</name></author><summary type="html"><![CDATA[幻灯片]]></summary></entry><entry><title type="html">写给零基础者的 GNU/Linux 安装教程</title><link href="/2021/06/27/install-ubuntu-for-newer.html" rel="alternate" type="text/html" title="写给零基础者的 GNU/Linux 安装教程" /><published>2021-06-27T04:00:00-800:00</published><updated>2021-06-27T04:00:00-800:00</updated><id>/2021/06/27/install-ubuntu-for-newer</id><content type="html" xml:base="/2021/06/27/install-ubuntu-for-newer.html"><![CDATA[<blockquote>
  <p><a href="http://creativecommons.org/licenses/by-sa/4.0/"><img src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" alt="Creative Commons License" /></a></p>

  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p>

  <p>这份文档以 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC-BY-SA 4.0</a> 进行许可。简单地说，您可以在合适的署名下以相同的许可证，自由地共享、演绎该作品（衍生品需要标明对原作进行了修改），无论用于商业或非商业目的，具体细节以许可证文本为准。</p>
</blockquote>

<h2 id="导读">导读</h2>

<p>该文档的安装步骤基于 Windows 上的虚拟机软件 VirtualBox 及 GNU/Linux 发行版 Ubuntu。</p>

<p>最终效果（参考）：</p>

<p><img src="install-neofetch-7.png.jpg" alt="" /></p>

<h3 id="组成部分及阅读顺序">组成部分及阅读顺序</h3>

<ol>
  <li><a href="#下载并安装-virtualbox">下载并安装 VirtualBox</a></li>
  <li><a href="#下载-ubuntu-安装镜像">下载 Ubuntu 安装镜像</a></li>
  <li><a href="#配置-virtualbox-虚拟机并启动-ubuntu-安装程序">配置 VirtualBox 虚拟机并启动 Ubuntu 安装程序</a></li>
  <li><a href="#安装-ubuntu">安装 Ubuntu</a></li>
</ol>

<ul>
  <li><a href="#附录-1分辨率过低导致安装界面显示不全的解决方法">附录 1：分辨率过低导致安装界面显示不全的解决方法</a></li>
</ul>

<p>其中，1、2 步相互独立，第 3 步依赖于第 1、2 步；第 4 步依赖于第 3 步，但也可单独作为使用其他方式安装 Ubuntu 的参考。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 1     2
 |    /
 |---/
\|/
 3
 |
\|/
 4
</code></pre></div></div>

<h3 id="关于截图">关于截图</h3>

<p>没有特殊操作的截图都已折叠起来，可按需单击展开，其中</p>

<ul>
  <li>对应步骤的文字说明（如果有）一般会位于截图上方</li>
  <li>需要点击的步骤中，截图上的鼠标一般会位于需要点击处。</li>
</ul>

<p>截图仅供参考，以实际情况为准。</p>

<h2 id="下载并安装-virtualbox">下载并安装 VirtualBox</h2>

<ol>
  <li>
    <p>用浏览器打开 mirrorz（<a href="https://mirrorz.org/app/VirtualBox">https://mirrorz.org/app/VirtualBox</a>）选择一个标明 <code class="language-plaintext highlighter-rouge">Win</code> 的 VirtualBox 镜像（<code class="language-plaintext highlighter-rouge">latest(Win)</code>）下载。</p>

    <p>点击其中一处 <code class="language-plaintext highlighter-rouge">latest(Win)</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="mirrorz-virtualbox.png.jpg" alt="mirrorz-virtualbox" /></p>

    </details>
  </li>
  <li>
    <p>下载完成后，运行下载下来的安装包文件并安装。</p>

    <details>
      <summary>点击展开详细步骤截图</summary>

      <blockquote>
        <p>点击下一步：</p>

        <p><img src="install-virtualbox-1.png.jpg" alt="" /></p>

        <p>此处可以自定义安装的组件以及安装目录，没有特殊需要可以保留默认设置。点击下一步：</p>

        <p><img src="install-virtualbox-2.png.jpg" alt="" /></p>

        <p>此处选项无特殊需要可保留默认值。点击下一步：</p>

        <p><img src="install-virtualbox-3.png.jpg" alt="" /></p>

        <p>点击“是”后将会加入安装状态：</p>

        <p><img src="install-virtualbox-4.png.jpg" alt="" /></p>

        <p>进入安装状态时可能会弹出请求赋予权限的提示框，点击“是”：（您的安装过程中不一定会有此提示框，如果有，您的提示框也可能无需输入密码）</p>

        <p><img src="install-virtualbox-6.png.jpg" alt="" /></p>

        <p>正在安装，请稍等片刻：</p>

        <p><img src="install-virtualbox-7.png.jpg" alt="" /></p>

        <p>安装过程中可能会弹出安装驱动程序的提示，点击“安装”：</p>

        <p><img src="install-virtualbox-8.png.jpg" alt="" /></p>

        <p>安装完成的界面：</p>

        <p><img src="install-virtualbox-9.png.jpg" alt="" /></p>
      </blockquote>
    </details>
  </li>
</ol>

<h2 id="下载-ubuntu-安装镜像">下载 Ubuntu 安装镜像</h2>

<p>此处我们使用 20.04.3 版<sup id="fnref:ubuntu-release"><a href="#fn:ubuntu-release" class="footnote" rel="footnote" role="doc-noteref">1</a></sup>的桌面版（<code class="language-plaintext highlighter-rouge">Desktop</code>），推荐重庆大学的同学从重庆大学开源软件镜像站下载 Ubuntu 镜像：<a href="https://mirrors.cqu.edu.cn/ubuntu-releases/20.04.3/ubuntu-20.04.3-desktop-amd64.iso">https://mirrors.cqu.edu.cn/ubuntu-releases/20.04.3/ubuntu-20.04.3-desktop-amd64.iso</a>，此外也可以从 mirrorz <a href="https://mirrorz.org/os/ubuntu">https://mirrorz.org/os/ubuntu</a> 选择合适的镜像站进行下载。</p>

<h2 id="配置-virtualbox-虚拟机并启动-ubuntu-安装程序">配置 VirtualBox 虚拟机并启动 Ubuntu 安装程序</h2>

<h3 id="新建虚拟机">新建虚拟机</h3>

<ol>
  <li>
    <p>打开 VirtualBox</p>

    <details>
      <summary>截图</summary>

      <p><img src="gui.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>点击新建按钮，设置虚拟机名称（自己定的名称），<code class="language-plaintext highlighter-rouge">类型</code> 设为 <code class="language-plaintext highlighter-rouge">Linux</code>，点击<code class="language-plaintext highlighter-rouge">下一步</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="setup-vm-2.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>内存设置为至少 4096MB<sup id="fnref:ubuntu-require"><a href="#fn:ubuntu-require" class="footnote" rel="footnote" role="doc-noteref">2</a></sup>，点击下一步</p>

    <details>
      <summary>截图</summary>

      <p><img src="setup-vm-3.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>是否创建虚拟硬盘，无特殊需求保持默认选项（<code class="language-plaintext highlighter-rouge">现在创建虚拟硬盘</code>）即可，点击<code class="language-plaintext highlighter-rouge">创建</code>；如果您只想试用 Ubuntu 而不想安装，此处选择<code class="language-plaintext highlighter-rouge">不添加虚拟硬盘</code>，然后该教程跳到<a href="#虚拟机的一些可选配置">虚拟机的一些可选配置</a></p>

    <details>
      <summary>截图</summary>

      <p><img src="setup-vm-4.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>虚拟硬盘文件类型保持默认选项即可，点击<code class="language-plaintext highlighter-rouge">下一步</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="setup-vm-5.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>虚拟硬盘存储方式，若不打算重度使用 Ubuntu，那么可保持默认选项（<code class="language-plaintext highlighter-rouge">动态分配</code>），点击<code class="language-plaintext highlighter-rouge">下一步</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="setup-vm-6.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>虚拟硬盘文件位置请视需要自定义或保持默认，大小请设为不低于 9GB，推荐 24GB 及以上<sup id="fnref:ubuntu-require:1"><a href="#fn:ubuntu-require" class="footnote" rel="footnote" role="doc-noteref">2</a></sup>，之后点击<code class="language-plaintext highlighter-rouge">创建</code>，虚拟机就可以创建好了</p>

    <details>
      <summary>截图</summary>

      <p><img src="setup-vm-7.png.jpg" alt="" /></p>

      <p>创建好的虚拟机：</p>

      <p><img src="config-vm-1.png.jpg" alt="" /></p>

    </details>
  </li>
</ol>

<h3 id="虚拟机的一些可选配置">虚拟机的一些可选配置<sup id="fnref:ubuntu-require:2"><a href="#fn:ubuntu-require" class="footnote" rel="footnote" role="doc-noteref">2</a></sup></h3>

<ol>
  <li>
    <p>打开 VirtualBox，如图所示，点击<code class="language-plaintext highlighter-rouge">设置</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="config-vm-1.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>点击窗口左侧的<code class="language-plaintext highlighter-rouge">系统</code>，勾选<code class="language-plaintext highlighter-rouge">启用 EFI</code><sup id="fnref:ubuntu-require:3"><a href="#fn:ubuntu-require" class="footnote" rel="footnote" role="doc-noteref">2</a></sup><sup id="fnref:efi"><a href="#fn:efi" class="footnote" rel="footnote" role="doc-noteref">3</a></sup></p>

    <details>
      <summary>截图</summary>

      <p><img src="config-vm-2.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>点击<code class="language-plaintext highlighter-rouge">处理器</code>，将<code class="language-plaintext highlighter-rouge">处理器数量</code>调至至少为 2<sup id="fnref:ubuntu-require:4"><a href="#fn:ubuntu-require" class="footnote" rel="footnote" role="doc-noteref">2</a></sup></p>

    <details>
      <summary>截图</summary>

      <p><img src="config-vm-3.png.jpg" alt="" /></p>

    </details>
  </li>
</ol>

<h3 id="引导-ubuntu-安装程序">引导 Ubuntu 安装程序</h3>

<ol>
  <li>
    <p>做完前述操作后，点击<code class="language-plaintext highlighter-rouge">启动</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="load-linux-vm-1.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>片刻过后，应该会看到<code class="language-plaintext highlighter-rouge">选择启动盘</code>的界面，如图所示，点击黄色文件夹图标（<code class="language-plaintext highlighter-rouge">选择一个虚拟光盘文件</code>）</p>

    <details>
      <summary>截图</summary>

      <p><img src="load-linux-vm-1.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>在弹出来的窗口中点击<code class="language-plaintext highlighter-rouge">注册</code>，选择之前下载好的 Ubuntu 安装镜像 <code class="language-plaintext highlighter-rouge">ubuntu-20.04.3-desktop-amd64.iso</code>后，点击<code class="language-plaintext highlighter-rouge">打开</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="load-linux-vm-2.png.jpg" alt="" /></p>

      <p><img src="load-linux-vm-3.png.jpg" alt="" /></p>

      <p><img src="load-linux-vm-4.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>选中刚刚添加的安装镜像，并点击<code class="language-plaintext highlighter-rouge">选择</code>，之后可以看到<code class="language-plaintext highlighter-rouge">ubuntu-20.04.3-desktop-amd64.iso</code>的字样已经出现在<code class="language-plaintext highlighter-rouge">选择启动盘</code>的界面，点击<code class="language-plaintext highlighter-rouge">启动</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="load-linux-vm-5.png.jpg" alt="" /></p>

      <p><img src="load-linux-vm-6.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p><strong>注意，之后要进入 VirtualBox 的虚拟系统中，您的鼠标和键盘会被虚拟系统占用，被用于操作虚拟系统，按右 Ctrl 键（键盘右侧的 Ctrl 键）可以解除这种占用状态，您之后可能会需要多次使用此键来解除占用翻阅资料。</strong> 点击虚拟机窗口的虚拟区域，出现占用鼠标、键盘的提示，按<code class="language-plaintext highlighter-rouge">捕获</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="load-linux-vm-7.png.jpg" alt="" /></p>

    </details>
  </li>
</ol>

<h2 id="安装-ubuntu">安装 Ubuntu</h2>

<ol>
  <li>
    <p>接上一个步骤，我们会看到如下界面短暂地出现</p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-1.png.jpg" alt="" /></p>

      <p><img src="install-ubuntu-2.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>然后进入如下界面，此时系统在校验安装镜像的完整性（即，镜像的数据是否正确），可以按 <code class="language-plaintext highlighter-rouge">Ctrl+C</code> 跳过该步骤（生产环境中不建议这么做）</p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-3.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>接下来可能会依次在如下界面停留片刻，请耐心等待</p>

    <details>
      <summary>截图</summary>

      <p>转圈</p>

      <p><img src="install-ubuntu-4.png.jpg" alt="" /></p>

      <p>黑屏</p>

      <p><img src="install-ubuntu-5.png.jpg" alt="" /></p>

      <p>进入图形界面</p>

      <p><img src="install-ubuntu-6.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>之后可以看到安装程序自动启动</p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-7.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>在窗口左侧的语言选择框里向下滚动，选择<code class="language-plaintext highlighter-rouge">中文(简体)</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-8.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>点击<code class="language-plaintext highlighter-rouge">安装 Ubuntu</code>；而如果您不打算安装 Ubuntu 而仅仅想试用，请点击<code class="language-plaintext highlighter-rouge">试用 Ubuntu</code>，请跳到下面 <code class="language-plaintext highlighter-rouge">试用 Ubuntu</code> 的折叠内容</p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-9.png.jpg" alt="" /></p>

    </details>

    <details>
      <summary>试用 Ubuntu</summary>

      <p>点击<code class="language-plaintext highlighter-rouge">使用 Ubuntu</code>后虚拟机会自动重启，一会儿后进入 Ubuntu 的桌面。</p>

      <p>此时，按 <code class="language-plaintext highlighter-rouge">Ctrl+Alt+T</code> 打开终端，输入</p>
      <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> deb http://mirrors.cqu.edu.cn/ubuntu/ focal universe | <span class="nb">sudo tee</span> <span class="nt">-a</span> /etc/apt/sources.list
</code></pre></div>      </div>
      <p>注意以下几点：</p>
      <ul>
        <li><code class="language-plaintext highlighter-rouge">universe</code> 和 <code class="language-plaintext highlighter-rouge">sudo</code> 之间的一竖不是字母 <code class="language-plaintext highlighter-rouge">l</code>，而是 <code class="language-plaintext highlighter-rouge">\</code> 键上符号 <code class="language-plaintext highlighter-rouge">|</code>。</li>
        <li><strong>单词不要拼错，符号不要打错，空格不要漏了</strong></li>
      </ul>

      <p>按回车键，之后跳到该教程的<a href="#最终效果">最终效果</a>部分。</p>
    </details>
  </li>
  <li>
    <p>键盘布局，一般保持默认即可，点击<code class="language-plaintext highlighter-rouge">继续</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-9.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>无特殊需要保持默认即可（时间不充裕的话可以取消<code class="language-plaintext highlighter-rouge">安装Ubuntu时下载更新</code>的勾选）点击<code class="language-plaintext highlighter-rouge">继续</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-10.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>如果使用虚拟机安装，无特殊需要保持默认即可；如果在真机上安装，请根据实际情况进行配置，点击<code class="language-plaintext highlighter-rouge">现在安装</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-11.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>弹出分区修改的确认对话框，点击<code class="language-plaintext highlighter-rouge">继续</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-12.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>选择时区，用鼠标在中国的版图内点一下（如果您在北京时区），地图下面出现 <code class="language-plaintext highlighter-rouge">Shanghai</code> 字样即为北京时区。之后点击<code class="language-plaintext highlighter-rouge">继续</code>。</p>

    <p>PS: 这个地图上标注的是各地区的时区划分，而<strong>不是国界</strong></p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-13.png.jpg" alt="" /></p>

      <p><img src="install-ubuntu-14.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>填写信息，其中填写<code class="language-plaintext highlighter-rouge">姓名</code>（请使用英文字母、数字、下划线等组合，不要是用空格和中文）后<code class="language-plaintext highlighter-rouge">计算机名</code>、<code class="language-plaintext highlighter-rouge">用户名</code>会自动填充，无特殊需要这几项可以不改，之后填写密码，以后会使用这个密码来登陆。设置完后点击<code class="language-plaintext highlighter-rouge">继续</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-15.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>程序进入安装过程，此处可能需要一些时间，请耐心等待</p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-16.png.jpg" alt="" /></p>

      <p><img src="install-ubuntu-17.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>安装完成，点击<code class="language-plaintext highlighter-rouge">现在重启</code>以重启虚拟机</p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-18.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>片刻之后出现 <code class="language-plaintext highlighter-rouge">Please remove the installation medium, then press ENTER</code> 字样的提示，按回车键（Enter）</p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-19.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>之后虚拟机会重启，一会儿可以见到登陆界面</p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-20.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>单击自己的用户名，输入密码并按回车键以登陆，之后可见<code class="language-plaintext highlighter-rouge">连接帐号</code>的向导，无相关需求点击<code class="language-plaintext highlighter-rouge">跳过</code>即可</p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-21.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>Livepatch 配置，无需要直接点击<code class="language-plaintext highlighter-rouge">前进</code>即可</p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-22.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>选择是否发送信息给 Cononical（Ubuntu 是该公司的项目），之后点击<code class="language-plaintext highlighter-rouge">前进</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-23.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>准备就绪，点击<code class="language-plaintext highlighter-rouge">完成</code></p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-24.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>若出现提醒更新的窗口，点击<code class="language-plaintext highlighter-rouge">稍后提醒</code>即可</p>

    <details>
      <summary>截图</summary>

      <p><img src="install-ubuntu-25.png.jpg" alt="" /></p>

    </details>
  </li>
</ol>

<h2 id="最终效果">最终效果</h2>

<ol>
  <li>
    <p>按 <code class="language-plaintext highlighter-rouge">Ctrl+Alt+T</code>，屏幕上会出现一个终端</p>

    <details>
      <summary>截图</summary>

      <p><img src="install-neofetch-1.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>输入 <code class="language-plaintext highlighter-rouge">sudo apt update</code>（注意<strong>其中的空格不可省略，单词不要拼错</strong>）并按回车键，之后若看到输入密码的提示请输入之前设定的密码（注意输入过程中密码不会回显出来，即输入过程中看不到任何变化）并按回车键</p>

    <details>
      <summary>截图</summary>

      <p><img src="install-neofetch-2.png.jpg" alt="" /></p>

      <p><img src="install-neofetch-3.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>等上个指令运行完毕（绿色的字符重新出现，如截图中的 <code class="language-plaintext highlighter-rouge">hagb@hagb-VirtualBox</code> 字样）后，输入 <code class="language-plaintext highlighter-rouge">sudo apt install neofetch</code> 并回车，看到<code class="language-plaintext highlighter-rouge">您希望继续执行吗</code>的询问后按 <code class="language-plaintext highlighter-rouge">y</code> 并回车以确认</p>

    <details>
      <summary>截图</summary>

      <p><img src="install-neofetch-4.png.jpg" alt="" /></p>

    </details>
  </li>
  <li>
    <p>等上个指令执行完后，输入 <code class="language-plaintext highlighter-rouge">neofetch</code> 并回车，即可见到文章开头的效果：</p>

    <p><img src="install-neofetch-7.png.jpg" alt="" /></p>
  </li>
</ol>

<h2 id="附录-1分辨率过低导致安装界面显示不全的解决方法">附录 1：分辨率过低导致安装界面显示不全的解决方法</h2>

<p>TODO</p>

<h2 id="参考文献">参考文献</h2>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:ubuntu-release">
      <p>上面推荐的 20.04 是从中选择了最近的一个 LTS（长期支持）版本 https://ubuntu.com/about/release-cycle <a href="#fnref:ubuntu-release" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:ubuntu-require">
      <p>Ubuntu 的系统要求 https://help.ubuntu.com/community/Installation/SystemRequirements <a href="#fnref:ubuntu-require" class="reversefootnote" role="doc-backlink">&#8617;</a> <a href="#fnref:ubuntu-require:1" class="reversefootnote" role="doc-backlink">&#8617;<sup>2</sup></a> <a href="#fnref:ubuntu-require:2" class="reversefootnote" role="doc-backlink">&#8617;<sup>3</sup></a> <a href="#fnref:ubuntu-require:3" class="reversefootnote" role="doc-backlink">&#8617;<sup>4</sup></a> <a href="#fnref:ubuntu-require:4" class="reversefootnote" role="doc-backlink">&#8617;<sup>5</sup></a></p>
    </li>
    <li id="fn:efi">
      <p>legacy 模式下屏幕分辨率可能需要手动调节以便将安装界面显示完全 https://stackoverflow.com/questions/57115746/virtualbox-screen-resolution-too-small-during-installation <a href="#fnref:efi" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>Hagb (郭俊余)</name></author><summary type="html"><![CDATA[This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License. 这份文档以 CC-BY-SA 4.0 进行许可。简单地说，您可以在合适的署名下以相同的许可证，自由地共享、演绎该作品（衍生品需要标明对原作进行了修改），无论用于商业或非商业目的，具体细节以许可证文本为准。]]></summary></entry><entry><title type="html">记折腾容器化 EasyConnect 的全局透明代理</title><link href="/2020/03/21/easyconnect-proxy.html" rel="alternate" type="text/html" title="记折腾容器化 EasyConnect 的全局透明代理" /><published>2020-03-21T09:30:00-800:00</published><updated>2020-03-21T09:30:00-800:00</updated><id>/2020/03/21/easyconnect-proxy</id><content type="html" xml:base="/2020/03/21/easyconnect-proxy.html"><![CDATA[<blockquote>
  <p>也算是水了第一篇技术博客吧……鄙人不是计算机科班出生，计算机方面的东西只是业余爱好。如果有什么不对或者可以改进的地方，望读者（如果有的话）不吝赐教！</p>
</blockquote>

<p>前一阵子折腾 <a href="https://github.com/Hagb/docker-easyconnect">EasyConnect 的容器化</a>，用来连接学校内网。当时是在 Docker 容器内运行 EasyConnect（以下简称 EC），同时开一个 Socks5 代理服务供宿主机使用。</p>

<p>后来又有了使用 EC 全局透明代理的需要，最直接的方法就是使用<code class="language-plaintext highlighter-rouge">--net host</code>参数让容器直接在宿主机中设置网络。但是 EC 会把路由表设得很乱，不方便管理（而且还容易产生冲突）。</p>

<p>也可以从容器中开出 PPTP 服务，然后在宿主机中使用 NetworkManager 连接，但是这样</p>

<ol>
  <li>需要专门设置 EC 容器的路由指向物理网卡以防止路由回环，并且网络环境变更之后又需要重新设置；</li>
  <li>在镜像中加入 PPTP 服务端会使镜像体积增大，使用 PPTP 也会占用一定的资源。</li>
</ol>

<p>于是改变思路，将容器作为一个网关来转发宿主机（lo）发出的流量到 EC。</p>

<h2 id="结果">结果</h2>

<p>每次开机后，运行一次，即可设置 EC 全局透明代理</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nv">NAME</span><span class="o">=</span><span class="s1">'easyconnect'</span>
<span class="nv">NET</span><span class="o">=</span><span class="s1">'svpn'</span>

docker network create <span class="s2">"</span><span class="nv">$NET</span><span class="s2">"</span>

xhost +LOCAL:
docker run <span class="nt">-d</span> <span class="nt">--network</span> svpn <span class="nt">--rm</span> <span class="nt">--name</span> <span class="s2">"</span><span class="nv">$NAME</span><span class="s2">"</span> <span class="nt">--device</span> /dev/net/tun <span class="se">\</span>
    <span class="nt">--cap-add</span> NET_ADMIN <span class="nt">-v</span> /tmp/.X11-unix:/tmp/.X11-unix <span class="se">\</span>
    <span class="nt">-v</span> <span class="nv">$HOME</span>/.Xauthority:/root/.Xauthority <span class="nt">-e</span> <span class="nv">DISPLAY</span><span class="o">=</span><span class="nv">$DISPLAY</span> <span class="se">\</span>
    <span class="nt">-e</span> <span class="nv">TYPE</span><span class="o">=</span>x11 <span class="nt">-v</span> <span class="nv">$HOME</span>/.ecdata:/root <span class="nt">-p</span> 127.0.0.1:1080:1080 <span class="se">\</span>
    hagb/docker-easyconnect
<span class="k">while </span>docker <span class="nb">exec</span> <span class="nv">$NAME</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-d</span> /sys/class/net/tun0 <span class="o">]</span>
<span class="k">do
</span><span class="nb">sleep </span>5
<span class="k">done
</span>docker <span class="nb">exec</span> <span class="s2">"</span><span class="nv">$NAME</span><span class="s2">"</span> iptables <span class="nt">-t</span> nat <span class="nt">-A</span> POSTROUTING <span class="nt">-o</span> tun0 <span class="nt">-j</span> MASQUERADE

<span class="nv">IP</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span>docker inspect <span class="nt">-f</span> <span class="s1">'{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'</span> <span class="s2">"</span><span class="nv">$NAME</span><span class="s2">"</span><span class="si">)</span><span class="s2">"</span>
<span class="nv">MTU</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span>docker <span class="nb">exec</span> <span class="s2">"</span><span class="nv">$NAME</span><span class="s2">"</span> <span class="nb">cat</span> /sys/class/net/tun0/mtu<span class="si">)</span><span class="s2">"</span>

<span class="nb">sudo </span>ip route flush table 3
<span class="nb">sudo </span>ip route add table 3 default via <span class="s2">"</span><span class="nv">$IP</span><span class="s2">"</span> mtu <span class="s2">"</span><span class="nv">$MTU</span><span class="s2">"</span>
<span class="nb">sudo </span>ip rule add iif lo table 3 
</code></pre></div></div>

<p>然后路由是这样的：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(EC in docker)    [tun0] &lt;---- route table of EC &lt;---+
===[svpn]===========|============|===================|=====
                    |            |           table 3 |
(host)              V            |               request(lo)
               table main &lt;------+
                    V
                [物理网卡]
</code></pre></div></div>

<p>不走 EC 的流量可以在路由表 table 3 中定义。</p>

<p>或者亦可将<code class="language-plaintext highlighter-rouge">sudo ip route add table 3 default via "$IP" mtu "$MTU"</code>代之以需要走 EC 的流量的路由。</p>

<p>如果要开热点或者用网线共享 EC 网络，那么还需要运行（以下以共享网络所用网卡名为<code class="language-plaintext highlighter-rouge">wlp2s0</code>，网段为<code class="language-plaintext highlighter-rouge">10.42.0.0/24</code>为例）</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo ip route add table 3 10.42.0.0/24 dev wlp2s0
sudo ip rule add iif wlp2s0 table 3
</code></pre></div></div>

<h2 id="折腾过程中的坑">折腾过程中的坑</h2>

<h3 id="mtu">MTU</h3>

<p>其实折腾过程中耗费的大部分时间都是因为 MTU。在笔者折腾的环境下，EC 容器中创建出来的虚拟网卡<code class="language-plaintext highlighter-rouge">tun0</code>的 MTU 为 1400，而其他各个虚拟或实体的网卡默认 MTU 均是 1500。一开始是进行试配置之后使用<code class="language-plaintext highlighter-rouge">www.baidu.com</code>的 ip 地址<code class="language-plaintext highlighter-rouge">182.61.200.6</code>来验证，但因为<code class="language-plaintext highlighter-rouge">tun0</code>的 MTU 小于默认的 MTU，因此一直无法连上（详细地说是能够建立连接，但无法完成握手过程），只能反复试验。</p>

<p>后来发现许多别的网站能够访问，但访问速度和容器内明显有差异，而 <a href="http://www.baidu.com">http://www.baidu.com</a> 则完全无法访问。仔细排查，发现 MTU 不一致的情况，于是尝试将<code class="language-plaintext highlighter-rouge">tun0</code>的 MTU 值也写进路由表，问题解决。</p>]]></content><author><name>Hagb (郭俊余)</name></author><summary type="html"><![CDATA[也算是水了第一篇技术博客吧……鄙人不是计算机科班出生，计算机方面的东西只是业余爱好。如果有什么不对或者可以改进的地方，望读者（如果有的话）不吝赐教！]]></summary></entry><entry><title type="html">开始尝试写博客</title><link href="/jekyll/update/2020/03/16/begin-blog.html" rel="alternate" type="text/html" title="开始尝试写博客" /><published>2020-03-16T09:55:00-800:00</published><updated>2020-03-16T09:55:00-800:00</updated><id>/jekyll/update/2020/03/16/begin-blog</id><content type="html" xml:base="/jekyll/update/2020/03/16/begin-blog.html"><![CDATA[<p>啊…… 就是感觉，这几年折腾了挺多东西，各种各样、乱七八糟的…… 没记下来，很多都消失在记忆长河里的。</p>

<p><code class="language-plaintext highlighter-rouge">hagb.name</code>的域名也租了几年，也就是租着，什么新的都没写。现在，看看能不能写起博客，养成写博客的习惯。</p>

<p>最近准备折腾 <del><a href="https://coq.inria.fr/">coq</a></del>（2020-08-17 更新：已经转投 <a href="https://leanprover.github.io/">lean</a> 了）的定理机器验证。</p>]]></content><author><name>Hagb (郭俊余)</name></author><category term="jekyll" /><category term="update" /><summary type="html"><![CDATA[啊…… 就是感觉，这几年折腾了挺多东西，各种各样、乱七八糟的…… 没记下来，很多都消失在记忆长河里的。]]></summary></entry><entry><title type="html">Hello Jekyll!</title><link href="/jekyll/update/2017/04/21/welcome-to-jekyll.html" rel="alternate" type="text/html" title="Hello Jekyll!" /><published>2017-04-21T05:01:00-800:00</published><updated>2017-04-21T05:01:00-800:00</updated><id>/jekyll/update/2017/04/21/welcome-to-jekyll</id><content type="html" xml:base="/jekyll/update/2017/04/21/welcome-to-jekyll.html"><![CDATA[<p>我的第一篇 Jeklly Blog</p>]]></content><author><name>Hagb (郭俊余)</name></author><category term="jekyll" /><category term="update" /><summary type="html"><![CDATA[我的第一篇 Jeklly Blog]]></summary></entry></feed>